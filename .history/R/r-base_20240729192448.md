# R语言编程（Base）

## 1 向量

> R语言中最基本的数据类型是向量(vector)，单个数值（标量）没有单独的数据类型，只不过是向量的一种特例。另一方面R语言中的矩阵是向量的一种特例。

> R语言中变量类型称为模式(mode)。同一向量中的所有元素必须是相同的模式（整型、数值型、字符型、逻辑型、复数型等等）。如果在程序中查看变量x的类型，可以调用函数typeof(x)进行查询。

### 1.1 标量、向量、数组、矩阵

#### 1.1.1 添加或删除向量元素

R中向量是连续存储的，因此不能插入或删除元素。向量在创建时已经确定，如果想要添加或删除元素，需要重新给向量赋值。

```r
> x <- c(88,5,12,13)
> x <- c(x[1:3],168,x[4])
> x
[1]  88   5  12 168  13
```

x本质上时一个指针（注意：R中没有指针的概念），重新赋值时通过将x指向新向量的方式实现的。但是这种方式实际上有一些潜在的副作用，当数据量庞大之后，会影响R的执行速度。

#### 1.1.2 获取向量长度

使用length()获取向量的长度。

```r
> x <- c(1,2,4)
> length(x)
[1] 3
```

#### 1.1.3 作为向量的矩阵和数值

### 1.2 声明

### 1.3 循环补齐

### 1.4 常用的向量运算

#### 1.4.1 向量运算和逻辑运算

#### 1.4.2 向量索引

#### 1.4.3 用:运算符创建向量

#### 1.4.4 使用seq()创建向量

#### 1.4.5 使用rep()重复向量常数

### 1.5 使用all()与any()

### 1.6 向量化运算

#### 1.6.1 向量输入，向量输入

#### 1.6.2 向量输入，矩阵输出

### 1.7 NA与NULL值

#### 1.7.1 NA的使用

#### 1.7.2 NULL的使用

### 1.8 筛选

#### 1.8.1 生成筛选索引

#### 1.8.2 使用subset()函数筛选

#### 1.8.3 选择函数which()

### 1.9 向量化的ifelse()函数

### 1.10 测试向量相等

### 1.11 向量元素的名称

### 1.12 关于c()的更多内容

## 2 矩阵和数组

### 2.1 创建矩阵

### 2.2 一般矩阵运算

### 2.3 对矩阵的行和列调用函数

### 2.4 增加或删除矩阵的行或列

### 2.5 向量与矩阵的差异

### 2.6 避免意外降维

### 2.7 矩阵的行和列的命名问题

### 2.8 高维数组

## 3 列表

### 3.1 创建列表

### 3.2 列表的常规操作

### 3.3 访问列表元素和值

### 3.4 在列表上使用apply系列函数

### 3.5 递归型列表

## 4 数据框

### 4.1 创建数据框

### 4.2 其他矩阵式操作

### 4.3 合并数据框

### 4.4 应用于数据框的函数

## 5 因子和表

### 5.1 因子的水平

### 5.2 因子的常用函数

### 5.3 表的操作

### 5.4 其他与因子和表有关的函数

## 6 R语言编程结构

### 6.1 控制语句

### 6.2 算术的逻辑运算符和数值

### 6.3 参数的默认值

### 6.4 返回值

### 6.5 函数都是对象

### 6.6 环境和变量作用域的问题

### 6.7 R语言中没有指针

### 6.8 向上级层次进行写操作

### 6.9 什么时候使用全局变量

### 6.10 闭包

## 7 数学运算与模拟

### 7.1 数学函数

### 7.2 统计分布函数

### 7.3 排序

### 7.4 向量和矩阵的线性代数运算

### 7.5 集合运算

### 7.6 用R做模拟


## 9 输入与输出

### 9.1 连接键盘与显示器

#### 9.1.1 使用scan()函数

使用scan()函数从文件中读取或用键盘输入一个向量，可以是数值型或字符型向量。

#### 9.1.2 使用readline()函数

#### 9.1.3 输出到显示器

### 9.2 读写文件

#### 9.2.1 从文件中读取数据框或矩阵

#### 9.2.2 读取文本文件

#### 9.2.3 连接的介绍

#### 9.2.4 写文件

#### 9.2.5 获取文件和目录信息

file.info(): 参数是表示文件名称的字符串向量，函数会给出每个文件的大小、创建时间、是否为目录等信息。

dir(): 返回一个字符向量，列出在其第一个参数指定的目录中所有文件的名称。如果指定可选参数recursive=TRUE，结果将把第一个参数下面整个目录树都显示出来。

file.exists(): 返回一个布尔向量，表示作为第一个参数的字符串向量中给定的每个文件名是否存在。

getwd()和setwd(): 用于确定或改变当前工作目录。

### 9.3 访问互联网

## 10 字符串操作

### 10.1 字符串操作函数概述

#### 10.1.1 grep()

grep(pattern,x)语句在字符串向量x里收缩给定子字符串pattern。如果x有n个元素，即包含n个字符串，则grep(pattern, x)会返回一个长度不超过n的向量。这个向量的每个元素是x的索引，表示在索引对应的元素x\[i]中有与pattern匹配的子字符串。

```r
> grep("pole", c("equator", "north pole", "south pole"))
[1] 2 3

> grep("Pole", c("equator", "north pole", "south pole"))
integer(0)
```

#### 10.1.2 nchar()

nchar(x)函数返回字符串x的长度。

```r
> nchar("south pole")
[1] 10
```

如果x不是字符形式，nchar()函数会得到不可预料的结果。例如nchar(NA)的结果是2，nchar(factor("abc"))得到1。

#### 10.1.3 paste()

paste(...)函数把若干个字符串（向量）拼接起来，返回一个长字符串。

可选参数sep可以用除了空格以外的其他符号把各个字符串组件连接起来。如果指定sep为空字符串，则字符串之间没有任何字符。

```r
> paste("north","pole")
[1] "north pole"

> paste("north","pole",sep="")
[1] "northpole"

> paste("north","pole",sep=".")
[1] "north.pole"

> paste("a", c(1,2,3),sep="")
[1] "a1" "a2" "a3"

> paste("a", c(1,2,3), ".pdf",sep="")
[1] "a1.pdf" "a2.pdf" "a3.pdf"
```

collapse参数指定符号将元素之间连接起来。

```r
> paste("a", c(1,2,3), ".pdf",sep="", collapse=" + ")
[1] "a1.pdf + a2.pdf + a3.pdf"

> paste(1:3, collapse="+")
[1] "1+2+3"
```

paste0()函数与paste()函数唯一的区别是：默认sep=""，以空字符串连接字符。

#### 10.1.4 sprintf()

sprintf(...)按照一定格式把若干个组件组合成字符串。表示“打印”到字符串里(string print)，而不是打印到屏幕上。

```r
> sprintf("the square of %d is %d", 4, 16)
[1] "the square of 4 is 16"

```

#### 10.1.5 substr()

substr(x,start, stop)函数返回给定字符串x中指定位置范围start:stop上的子字符串。

```php
> substr("equator",3,5)
[1] "uat"

```

#### 10.1.6 strsplit()

strsplit(x,split)函数根据x中的字符串split把字符串x拆分成若干子字符串，返回字写子字符串组成的R列表。

```r
> strsplit("6-16-2011",split="-")
[[1]]
[1] "6"    "16"   "2011"
```

#### 10.1.7 regexpr()

regexpr(pattern, text)在字符串text中寻找pattern，返回与pattern匹配的第一个子字符串的起始字符位置。

```r
> regexpr("uat", "equator")
[1] 3

```

#### 10.1.8 gregexpr()

gregexpr(pattern,text)的功能与regexpr()一样，不过它会寻找与pattern匹配的全部子字符串的起始位置。

```r
> gregexpr("iss","Mississippi")
[[1]]
[1] 2 5
```

### 10.2 正则表达式

当使用字符串函数grep(),grepl(),regexpr(),gregexpr(),sub(),gsub(),strsplit()时，会涉及到正则表达式的概念。

正则表达式是一种通配符，他是用来描述一系列字符串的简略表达式。

```r
> grep("[au]",c("equator","north pole","south pole"))
[1] 1 3

> grep("o.e",c("equator","north pole","south pole"))
[1] 2 3

> grep("n..t",c("equator","north pole","south pole"))
[1] 2

> grep("\\.", c("abc", "de", "f.g"))
[1] 3

```

## 11 绘图

## 12 调试

## 13 性能提升：速度与内存

## 14 R语言并行计算
